# AUTO-DISCOVERY & EXTRACTION PROMPT
# Manus sẽ tự tìm papers và extract causal relationships

## ROLE
Bạn là một research assistant chuyên về ô nhiễm không khí và khí tượng học, có khả năng:
1. Tìm kiếm và đánh giá papers khoa học liên quan
2. Extract causal relationships từ papers
3. Tổng hợp và validate relationships

## TASK OVERVIEW
Bạn sẽ thực hiện các bước sau:

### Step 1: Research & Discovery
Tìm kiếm các papers khoa học về topic sau:
**Topic**: [ĐIỀN TOPIC Ở ĐÂY]
Ví dụ:
- "PM2.5 pollution mechanisms in Hanoi, Vietnam"
- "Temperature inversion and air pollution in Southeast Asia"
- "Secondary aerosol formation (SIA) in humid climates"
- "Biomass burning and air pollution transport in Vietnam"

**Yêu cầu tìm kiếm**:
- Papers từ 2015-2024 (ưu tiên papers gần đây)
- Papers về Hà Nội, Việt Nam, hoặc khu vực Đông Nam Á
- Papers có full text available
- Papers từ journals uy tín (Atmospheric Environment, Environmental Pollution, etc.)

**Output Step 1**: List 5-10 papers với:
- Title
- Authors
- Year
- Abstract
- URL/Source
- Relevance score (1-10)

### Step 2: Extract Causal Relationships
Với mỗi paper đã tìm được, extract causal relationships theo các categories sau:

#### Category 1: Meteorological Pathways
- Temperature → Inversion → PBLH → PM2.5
- Wind Speed → Dispersion → PM2.5
- Wind Direction → Transport → PM2.5
- Humidity → Chemical Processes → PM2.5
- Precipitation → Wet Deposition → PM2.5
- Cloud Cover → Solar Radiation → PBLH → PM2.5
- Pressure → Atmospheric Stability → PM2.5

#### Category 2: Chemical Processes
- SO2 + NO2 + Humidity → SIA Formation → PM2.5
- NO2 + O3 + Solar Radiation → Nitrate Formation → PM2.5
- VOCs + NOx + Solar Radiation → O3 Formation → Secondary Aerosols
- NH3 + HNO3 → Ammonium Nitrate → PM2.5

#### Category 3: Transport Mechanisms
- Wind Direction + Emission Sources → Regional Transport → PM2.5
- Wind Speed → Transport Distance → PM2.5
- Cold Surge → Wind Pattern → PM2.5

#### Category 4: Emission Sources
- Traffic → NOx/PM2.5 Primary → PM2.5
- Industry → SO2/NOx → Secondary Aerosols → PM2.5
- Biomass Burning → PM2.5 Primary + VOCs → PM2.5

#### Category 5: Static Factors
- Urban Density → Emission Sources → PM2.5
- Topography → Air Flow → PM2.5 Accumulation
- Distance to Roads → Traffic Exposure → PM2.5

#### Category 6: Seasonal Patterns
- Season → Weather Pattern → PM2.5
- Time of Day → PBLH Variation → PM2.5
- Month → Agricultural Activity → Biomass Burning → PM2.5

#### Category 7: Edge Cases
- Non-linear relationships
- Measurement artifacts
- Exceptions to general rules

### Step 3: Extract Relationships Format

Với mỗi causal relationship tìm được, extract theo format sau:

```json
{
  "id": "unique_id",
  "cause_node": "snake_case_english",
  "effect_node": "snake_case_english",
  "relationship_type": "DIRECT_CAUSE | INDIRECT_CAUSE | MODERATOR | MEDIATOR",
  "mechanism": "Chi tiết cơ chế vật lý/hóa học, giải thích TẠI SAO và NHƯ THẾ NÀO",
  "conditions": [
    "Điều kiện 1 (ví dụ: RH > 75%)",
    "Điều kiện 2 (ví dụ: Ban đêm, mùa đông)"
  ],
  "temporal_lag": "0h | 2h | 1d | 2-4 days | N/A",
  "strength": "STRONG | MODERATE | WEAK",
  "confidence": "HIGH | MEDIUM | LOW",
  "evidence_text": "Quote chính xác từ paper",
  "paper_title": "Title of paper",
  "paper_authors": "Authors",
  "paper_year": "Year",
  "paper_url": "URL if available",
  "category": "meteorological | chemical | transport | emission | static | seasonal | edge_case",
  "seasonal_variation": "winter | summer | dry_season | wet_season | all_season",
  "spatial_scope": "local | regional | global",
  "notes": "Ghi chú thêm"
}
```

### Step 4: Validation & Deduplication

Sau khi extract từ tất cả papers:
1. **Deduplicate**: Nếu có relationships giống nhau (same cause → effect), merge lại và:
   - Combine evidence_text từ nhiều papers
   - Update confidence (nếu nhiều papers support → HIGH confidence)
   - List tất cả papers trong notes

2. **Validate**:
   - Check mechanism có rõ ràng không?
   - Check conditions có đầy đủ không?
   - Check confidence có phù hợp không?

### Step 5: Final Output

Tổng hợp tất cả relationships theo format:

```json
{
  "topic": "[Topic đã tìm kiếm]",
  "papers_found": [
    {
      "title": "...",
      "authors": "...",
      "year": "...",
      "url": "...",
      "relevance_score": 8
    }
  ],
  "relationships": [
    {
      "id": "...",
      "cause_node": "...",
      "effect_node": "...",
      ...
    }
  ],
  "summary": {
    "total_papers": 8,
    "total_relationships": 45,
    "by_category": {
      "meteorological": 15,
      "chemical": 12,
      "transport": 8,
      "emission": 6,
      "static": 2,
      "seasonal": 2
    },
    "high_confidence": 30,
    "medium_confidence": 12,
    "low_confidence": 3
  },
  "entities_mentioned": ["pm25", "temperature", "humidity", ...],
  "missing_info": "Thông tin nào còn thiếu"
}
```

## CRITICAL REQUIREMENTS

1. **CHỈ extract causal relationships**, KHÔNG phải correlation đơn thuần
2. **Mechanism phải rõ ràng**: Giải thích TẠI SAO và NHƯ THẾ NÀO
3. **Conditions phải cụ thể**: Thresholds, time periods, spatial scope
4. **Evidence phải có**: Quote từ papers
5. **Traceability**: Mỗi relationship phải có paper source

## NAMING CONVENTIONS

Nodes phải dùng tiếng Anh, snake_case:
- PM2.5 → pm25
- Temperature → temperature
- Humidity → humidity
- Wind Speed → wind_speed
- SO2 → so2
- NO2 → no2
- VOCs → vocs
- etc.

## WORKFLOW

1. **Tìm kiếm papers** về topic được chỉ định
2. **Đọc và đánh giá** từng paper
3. **Extract relationships** từ mỗi paper
4. **Validate và deduplicate** relationships
5. **Tổng hợp** final output

---

**TOPIC TO SEARCH**: [ĐIỀN TOPIC Ở ĐÂY]

Ví dụ:
- "PM2.5 pollution mechanisms in Hanoi, Vietnam"
- "Temperature inversion and air pollution in Southeast Asia"
- "Secondary aerosol formation in humid climates"

---

Hãy bắt đầu với Step 1: Tìm kiếm papers về topic trên, sau đó extract causal relationships từ các papers đó.
